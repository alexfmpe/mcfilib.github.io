<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Philip is a Ruby and Haskell developer currently working remotely from Penarth.">
    <title>
      Philip Cunningham -
      
      Function Composition in Ruby
      
    </title>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/filib.css">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="column one-third">
          <nav class="masthead">
            <ul>
              <li>
                <a href="../">
                  Home
                </a>
              </li>
              </li>
              <li>
                <a href="../about.html">
                  About
                </a>
              </li>
              <li>
                <a href="../rss.xml">
                  RSS
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
      <hr />
      <div class="row">
        <div>
  <h1>
    Function Composition in Ruby
  </h1>
  <section>
    <header>
      <h2>
        2012-10-23
      </h2>
      <p>
        <a href="../tags/ruby.html" class="post-category green">ruby</a>
      </p>
    </header>

    <div>
      <p>We can monkey patch <code>Proc</code> to add an operator for function composition.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">class</span> <span class="dt">Proc</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="kw">def</span> comp(f, g)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    -&gt; (*args) { f.(g.(*args)) }</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="kw">def</span> *(g)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">    comp(<span class="dv">self</span>, g)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw">end</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">multiply = -&gt; (x, y) { x * y }</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">negative = -&gt; (x) { -x }</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">composed = negative * multiply</a>
<a class="sourceLine" id="cb1-14" data-line-number="14"></a>
<a class="sourceLine" id="cb1-15" data-line-number="15">composed.(<span class="dv">9</span>,<span class="dv">9</span>) <span class="co"># =&gt; -81</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"></a>
<a class="sourceLine" id="cb1-17" data-line-number="17">[<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>].zip([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]).map{ |x, y| composed.(x, y) } <span class="co"># =&gt; [-2, -8, -18]</span></a></code></pre></div>
    </div>
  </section>
</div>

      </div>
    </div>
  </body>
</html>
